<!-- ===========================================ramy========================================================= -->
{% extends 'base.html' %}{% include 'partials/nav_bar.html' %}
{% block content %}
<script>
    function get_details(params) {
        console.log(params)
        location.assign(`projects/${params}`)
    }
</script>
<style>
 .stars_outer{
     position: relative;
     display: inline-block;
    }
 .stars_inner{
     position: absolute;
     top: 0;
     left: 0;
     white-space: nowrap;
     overflow: hidden;
    }
 .stars_outer::before{
     content:"\f005 \f005 \f005 \f005 \f005 ";
     font-family: 'Font Awesome 5 Free';
     font-weight: 900;
     color:grey;
 }
 .stars_inner::before{
     content:"\f005 \f005 \f005 \f005 \f005 ";
     font-family: 'Font Awesome 5 Free';
     font-weight: 900;
     color:goldenrod;
 }
</style>
<div class="card-columns" >
    {% for project in all_projects %}
    <div class="card">
      <div id="img{{project.id}}" class="carousel slide w-100 card-img-top" data-ride="carousel">
        <ol class="carousel-indicators">
        {% with project.pics|length as num %}
        {% for i in ''|center:num %}
                {% if forloop.first %}
                    <li data-target="#img{{project.id}}" data-slide-to="{{forloop.counter0}}" class="active"></li>
                {% else %}
                    <li data-target="#img{{project.id}}" data-slide-to="{{forloop.counter0}}"></li>
                {% endif %}
        {% endfor %}
        {% endwith %}
        </ol>
        <div class="carousel-inner">
            {% for pic in project.pics %}
                {% if forloop.first %}
                    <div class="carousel-item active">
                        <img class="d-block w-100" height="200px" src="{{pic}}" alt="{{project.id}}">
                    </div>
                {% else %}
                    <div class="carousel-item">
                        <img class="d-block w-100" height="200px" src="{{pic}}" alt="{{project.id}}">
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#img{{project.id}}" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#img{{project.id}}" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
      </div>
      <div class="card-body text-center " style="cursor: pointer;" onclick="get_details({{project.id}})">
        <div class="rating text-right">
            <div class="stars_outer " style="position: relative;display: inline-block;">
                <div class="stars_inner" style="width: {{project.rate_percentage}}%;"></div>
            </div>
            <span class="number-rating">{{project.rate}}</span>
        </div>
        <img width="70px" height="auto" class="rounded-circle border  border-primary" src="{{project.user_pic}}" alt="">
        <h5 class="card-title  text-danger">{{project.title}}</h5>
        <p class="card-text">{{project.details}}</p>
        <div class="progress">
            <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width:{{project.progress}}%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
        </div> 
        <div class="card-footer">
            <small>ends in {{project.remaining}}</small>
          </div>
      </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
<!-- ===========================================ramy========================================================= -->
